language: node_js
cache:
  directories:
  - node_modules
node_js:
    - "9"
    - "8"
    - "6"
script:
  - npm test

jobs:
  include:
    - stage: npm release
      node_js: "7"
      script: echo "Deploying to npm ..."
      deploy:
        provider: npm
        email: $NPM_EMAIL
        api_key: $NPM_API_KEY
        on: deploy-npm-release